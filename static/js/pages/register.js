!function($){function validateUsername(username){var username_reg=new RegExp(/[A-Z0-9a-z]+/);return username_reg.test(username)}function validateEmail(email){var email_reg=new RegExp(/[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}/);return email_reg.test(email)}function updateMessageBox(element,error,message){error?(addErrorState(element),$(element).parent().siblings(".msg-wrapper").find(".msg-box").addClass("has-error").html(message)):(addSuccessState(element),$(element).parent().siblings(".msg-wrapper").find(".msg-box").html(""))}function updateSubmitButtonState(){""===$usernameField.val()||$usernameField.hasClass("has-error")||""===$emailField.val()||$emailField.hasClass("has-error")||""===$passwordField.val()?$submitButton.addClass("is-disabled").prop("disabled",!0):$submitButton.removeClass("is-disabled").prop("disabled",!1)}function addErrorState(element){$(element).addClass("has-error").parent().siblings(".msg-wrapper").find(".field-helperIcon").removeClass("success icon-ok").addClass("error icon-error"),$(element).parent().siblings(".msg-wrapper").find(".msg-box").addClass("has-error")}function addSuccessState(element){$(element).removeClass("has-error").parent().siblings(".msg-wrapper").find(".field-helperIcon").removeClass("error icon-error").addClass("success icon-ok"),$(element).parent().siblings(".msg-wrapper").find(".msg-box").removeClass("has-error")}function init(){$usernameField.on("keyup",function(event){var error=!validateUsername(event.currentTarget.value);updateMessageBox(event.currentTarget,error,error_messages.username_format),error?(addErrorState(event.currentTarget),updateSubmitButtonState()):(addSuccessState(event.currentTarget),updateSubmitButtonState())}),$usernameField.on("blur",function(event){validateUsername(event.currentTarget.value)&&$.get("/api/get-all-user-displayname",function(users){var error=!1;_.forEach(users,function(user){user.display_name===event.currentTarget.value&&(error=!0)}),updateMessageBox(event.currentTarget,error,error_messages.username_taken)})}),$emailField.on("blur",function(event){var error=!validateEmail(event.currentTarget.value);updateMessageBox(event.currentTarget,error,error_messages.email),error?(addErrorState(event.currentTarget),updateSubmitButtonState()):(addSuccessState(event.currentTarget),updateSubmitButtonState())}),$passwordField.on("keyup",function(event){updateSubmitButtonState()})}var $usernameField=$("#username-field"),$emailField=$("#email-field"),$passwordField=$("#password-field"),$submitButton=$('button[type="submit"]'),error_messages={username_format:"Username must contain alphanumeric characters only",username_taken:"Username is already taken",email:"Please enter a valid email address"};init()}(jQuery);